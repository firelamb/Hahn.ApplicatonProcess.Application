{"map":"{\"version\":3,\"file\":\"t-custom-attribute.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/t/t-custom-attribute.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import * as tslib_1 from \"tslib\";\nvar TCustomAttribute_1;\nimport { customAttribute, HtmlBehaviorResource } from \"aurelia-templating\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { metadata } from \"aurelia-metadata\";\nimport { DOM } from \"aurelia-pal\";\nimport { I18N, I18N_EA_SIGNAL } from \"../i18n\";\nimport { LazyOptional } from \"../utils\";\nimport { TParamsCustomAttribute } from \"./t-params-custom-attribute\";\nlet TCustomAttribute = TCustomAttribute_1 = class TCustomAttribute {\n    constructor(element, service, ea, p) {\n        this.element = element;\n        this.service = service;\n        this.ea = ea;\n        this.lazyParams = p;\n    }\n    static inject() {\n        return [DOM.Element, I18N, EventAggregator, LazyOptional.of(TParamsCustomAttribute)];\n    }\n    static configureAliases(aliases) {\n        const r = metadata.getOrCreateOwn(metadata.resource, HtmlBehaviorResource, TCustomAttribute_1);\n        r.aliases = aliases;\n    }\n    bind() {\n        this.params = this.lazyParams();\n        if (this.params) {\n            this.params.valueChanged = (newParams, oldParams) => {\n                this.paramsChanged(this.value, newParams, oldParams);\n            };\n        }\n        const p = this.params !== null ? this.params.value : undefined;\n        this.subscription = this.ea.subscribe(I18N_EA_SIGNAL, () => {\n            this.service.updateValue(this.element, this.value, this.params !== null ? this.params.value : undefined);\n        });\n        this.service.updateValue(this.element, this.value, p);\n    }\n    paramsChanged(newValue, newParams) {\n        this.service.updateValue(this.element, newValue, newParams);\n    }\n    valueChanged(newValue) {\n        const p = this.params !== null ? this.params.value : undefined;\n        this.service.updateValue(this.element, newValue, p);\n    }\n    unbind() {\n        // If unbind is called before timeout for subscription is triggered, subscription will be undefined\n        if (this.subscription) {\n            this.subscription.dispose();\n        }\n    }\n};\nTCustomAttribute = TCustomAttribute_1 = tslib_1.__decorate([\n    customAttribute(\"t\")\n], TCustomAttribute);\nexport { TCustomAttribute };\n//# sourceMappingURL=t-custom-attribute.js.map"}
