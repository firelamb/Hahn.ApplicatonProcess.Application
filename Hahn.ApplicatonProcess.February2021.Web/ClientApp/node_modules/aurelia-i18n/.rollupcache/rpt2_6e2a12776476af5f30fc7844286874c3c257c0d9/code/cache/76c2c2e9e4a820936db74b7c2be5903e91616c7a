{"map":"{\"version\":3,\"file\":\"aurelia-i18n-loader.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/aurelia-i18n-loader.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import * as tslib_1 from \"tslib\";\nvar Backend = /** @class */ (function () {\n    function Backend(services, options) {\n        if (options === void 0) { options = {}; }\n        this.services = services;\n        this.options = options;\n        this.type = \"backend\";\n        this.init(services, options);\n    }\n    Backend.with = function (loader) {\n        this.loader = loader;\n        return this;\n    };\n    Backend.prototype.init = function (services, options) {\n        if (options === void 0) { options = {}; }\n        this.services = services;\n        this.options = Object.assign({}, {\n            loadPath: \"/locales/{{lng}}/{{ns}}.json\",\n            addPath: \"locales/add/{{lng}}/{{ns}}\",\n            allowMultiLoading: false,\n            parse: JSON.parse\n        }, options);\n    };\n    Backend.prototype.readMulti = function (languages, namespaces, callback) {\n        var loadPath = this.options.loadPath;\n        if (typeof this.options.loadPath === \"function\") {\n            loadPath = this.options.loadPath(languages, namespaces);\n        }\n        var url = this.services\n            .interpolator\n            .interpolate(loadPath, { lng: languages.join(\"+\"), ns: namespaces.join(\"+\") });\n        this.loadUrl(url, callback);\n    };\n    Backend.prototype.read = function (language, namespace, callback) {\n        var loadPath = this.options.loadPath;\n        if (typeof this.options.loadPath === \"function\") {\n            loadPath = this.options.loadPath([language], [namespace]);\n        }\n        var url = this.services.interpolator.interpolate(loadPath, { lng: language, ns: namespace });\n        this.loadUrl(url, callback);\n    };\n    Backend.prototype.loadUrl = function (url, callback) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var response, ret, err, _a;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, Backend.loader.loadText(url)];\n                    case 1:\n                        response = _b.sent();\n                        ret = void 0;\n                        err = void 0;\n                        try {\n                            ret = (response instanceof Object) ? response : this.options.parse(response, url);\n                        }\n                        catch (e) {\n                            err = \"failed parsing \" + url + \" to json\";\n                        }\n                        if (err) {\n                            return [2 /*return*/, callback(err, false)];\n                        }\n                        callback(null, ret);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = _b.sent();\n                        callback(\"failed loading \" + url, false /* no retry */);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // tslint:disable-next-line:variable-name\n    Backend.prototype.create = function (_languages, _namespace, _key, _fallbackValue) {\n        // not supported\n    };\n    Backend.type = \"backend\";\n    return Backend;\n}());\nexport { Backend };\nexport default Backend;\n//# sourceMappingURL=aurelia-i18n-loader.js.map"}
