{"map":"{\"version\":3,\"file\":\"t-custom-attribute.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/t/t-custom-attribute.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import * as tslib_1 from \"tslib\";\nimport { customAttribute, HtmlBehaviorResource } from \"aurelia-templating\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { metadata } from \"aurelia-metadata\";\nimport { DOM } from \"aurelia-pal\";\nimport { I18N, I18N_EA_SIGNAL } from \"../i18n\";\nimport { LazyOptional } from \"../utils\";\nimport { TParamsCustomAttribute } from \"./t-params-custom-attribute\";\nvar TCustomAttribute = /** @class */ (function () {\n    function TCustomAttribute(element, service, ea, p) {\n        this.element = element;\n        this.service = service;\n        this.ea = ea;\n        this.lazyParams = p;\n    }\n    TCustomAttribute_1 = TCustomAttribute;\n    TCustomAttribute.inject = function () {\n        return [DOM.Element, I18N, EventAggregator, LazyOptional.of(TParamsCustomAttribute)];\n    };\n    TCustomAttribute.configureAliases = function (aliases) {\n        var r = metadata.getOrCreateOwn(metadata.resource, HtmlBehaviorResource, TCustomAttribute_1);\n        r.aliases = aliases;\n    };\n    TCustomAttribute.prototype.bind = function () {\n        var _this = this;\n        this.params = this.lazyParams();\n        if (this.params) {\n            this.params.valueChanged = function (newParams, oldParams) {\n                _this.paramsChanged(_this.value, newParams, oldParams);\n            };\n        }\n        var p = this.params !== null ? this.params.value : undefined;\n        this.subscription = this.ea.subscribe(I18N_EA_SIGNAL, function () {\n            _this.service.updateValue(_this.element, _this.value, _this.params !== null ? _this.params.value : undefined);\n        });\n        this.service.updateValue(this.element, this.value, p);\n    };\n    TCustomAttribute.prototype.paramsChanged = function (newValue, newParams) {\n        this.service.updateValue(this.element, newValue, newParams);\n    };\n    TCustomAttribute.prototype.valueChanged = function (newValue) {\n        var p = this.params !== null ? this.params.value : undefined;\n        this.service.updateValue(this.element, newValue, p);\n    };\n    TCustomAttribute.prototype.unbind = function () {\n        // If unbind is called before timeout for subscription is triggered, subscription will be undefined\n        if (this.subscription) {\n            this.subscription.dispose();\n        }\n    };\n    var TCustomAttribute_1;\n    TCustomAttribute = TCustomAttribute_1 = tslib_1.__decorate([\n        customAttribute(\"t\")\n    ], TCustomAttribute);\n    return TCustomAttribute;\n}());\nexport { TCustomAttribute };\n//# sourceMappingURL=t-custom-attribute.js.map"}
