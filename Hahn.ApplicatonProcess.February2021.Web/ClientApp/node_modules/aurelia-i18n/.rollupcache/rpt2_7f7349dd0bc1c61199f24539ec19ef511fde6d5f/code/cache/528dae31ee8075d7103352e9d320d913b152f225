{"map":"{\"version\":3,\"file\":\"i18n.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/i18n.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import * as tslib_1 from \"tslib\";\nimport i18next from \"i18next\";\nimport { DOM, PLATFORM } from \"aurelia-pal\";\nimport * as LogManager from \"aurelia-logging\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { BindingSignaler } from \"aurelia-templating-resources\";\nexport var I18N_EA_SIGNAL = \"i18n:locale:changed\";\nvar I18N = /** @class */ (function () {\n    function I18N(ea, signaler) {\n        this.ea = ea;\n        this.signaler = signaler;\n        this.globalVars = {};\n        this.i18next = i18next;\n        this.Intl = PLATFORM.global.Intl;\n    }\n    I18N.inject = function () { return [EventAggregator, BindingSignaler]; };\n    I18N.prototype.setup = function (options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var defaultOptions;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                defaultOptions = {\n                    skipTranslationOnMissingKey: false,\n                    compatibilityJSON: \"v1\",\n                    lng: \"en\",\n                    attributes: [\"t\", \"i18n\"],\n                    fallbackLng: \"en\",\n                    debug: false\n                };\n                this.i18nextDeferred = new Promise(function (resolve, reject) {\n                    _this.i18next.init(options || defaultOptions, function (err) {\n                        if (err && !Array.isArray(err)) {\n                            reject(err);\n                        }\n                        // make sure attributes is an array in case a string was provided\n                        if (_this.i18next.options.attributes instanceof String) {\n                            _this.i18next.options.attributes = [_this.i18next.options.attributes];\n                        }\n                        resolve(_this.i18next);\n                    });\n                });\n                return [2 /*return*/, this.i18nextDeferred];\n            });\n        });\n    };\n    I18N.prototype.i18nextReady = function () {\n        return this.i18nextDeferred;\n    };\n    I18N.prototype.setLocale = function (locale) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var oldLocale = _this.getLocale();\n            _this.i18next.changeLanguage(locale, function (err, tr) {\n                if (err) {\n                    reject(err);\n                }\n                _this.ea.publish(I18N_EA_SIGNAL, { oldValue: oldLocale, newValue: locale });\n                _this.signaler.signal(\"aurelia-translation-signal\");\n                resolve(tr);\n            });\n        });\n    };\n    I18N.prototype.getLocale = function () {\n        return this.i18next.language;\n    };\n    I18N.prototype.nf = function (options, locales) {\n        return new this.Intl.NumberFormat(locales || this.getLocale(), options || {});\n    };\n    I18N.prototype.uf = function (numberLike, locale) {\n        var nf = this.nf({}, locale || this.getLocale());\n        var comparer = nf.format(10000 / 3);\n        var thousandSeparator = comparer[1];\n        var decimalSeparator = comparer[5];\n        if (thousandSeparator === \".\") {\n            thousandSeparator = \"\\\\.\";\n        }\n        // remove all thousand seperators\n        var result = numberLike.replace(new RegExp(thousandSeparator, \"g\"), \"\")\n            // remove non-numeric signs except -> , .\n            .replace(/[^\\d.,-]/g, \"\")\n            // replace original decimalSeparator with english one\n            .replace(decimalSeparator, \".\");\n        // return real number\n        return Number(result);\n    };\n    I18N.prototype.df = function (options, locales) {\n        return new this.Intl.DateTimeFormat(locales || this.getLocale(), options);\n    };\n    I18N.prototype.tr = function (key, options) {\n        var fullOptions = this.globalVars;\n        if (options !== undefined) {\n            fullOptions = Object.assign(Object.assign({}, this.globalVars), options);\n        }\n        return this.i18next.t(key, fullOptions);\n    };\n    I18N.prototype.registerGlobalVariable = function (key, value) {\n        this.globalVars[key] = value;\n    };\n    I18N.prototype.unregisterGlobalVariable = function (key) {\n        delete this.globalVars[key];\n    };\n    /**\n     * Scans an element for children that have a translation attribute and\n     * updates their innerHTML with the current translation values.\n     *\n     * If an image is encountered the translated value will be applied to the src attribute.\n     *\n     * @param el    HTMLElement to search within\n     */\n    I18N.prototype.updateTranslations = function (el) {\n        if (!el || !el.querySelectorAll) {\n            return;\n        }\n        var i;\n        var l;\n        // create a selector from the specified attributes to look for\n        // var selector = [].concat(this.i18next.options.attributes);\n        var attributes = this.i18next.options.attributes;\n        var selector = [].concat(attributes);\n        for (i = 0, l = selector.length; i < l; i++) {\n            selector[i] = \"[\" + selector[i] + \"]\";\n        }\n        selector = selector.join(\",\");\n        // get the nodes\n        var nodes = el.querySelectorAll(selector);\n        for (i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            var keys = void 0;\n            var params = void 0;\n            // test every attribute and get the first one that has a value\n            for (var i2 = 0, l2 = attributes.length; i2 < l2; i2++) {\n                keys = node.getAttribute(attributes[i2]);\n                var pname = attributes[i2] + \"-params\";\n                if (pname && node.au && node.au[pname]) {\n                    params = node.au[pname].viewModel.value;\n                }\n                if (keys) {\n                    break;\n                }\n            }\n            // skip if nothing was found\n            if (!keys) {\n                continue;\n            }\n            // split the keys into multiple keys separated by a ;\n            this.updateValue(node, keys, params);\n        }\n    };\n    I18N.prototype.updateValue = function (node, value, params) {\n        if (value === null || value === undefined) {\n            value = \"\";\n        }\n        var keys = value.toString().split(\";\");\n        var i = keys.length;\n        while (i--) {\n            var key = keys[i];\n            // remove the optional attribute\n            var re = /\\[([a-z\\-, ]*)\\]/ig;\n            var m = void 0;\n            var attr = \"text\";\n            // set default attribute to src if this is an image node\n            if (node.nodeName === \"IMG\") {\n                attr = \"src\";\n            }\n            // check if a attribute was specified in the key\n            // tslint:disable-next-line:no-conditional-assignment\n            while ((m = re.exec(key)) !== null) {\n                if (m.index === re.lastIndex) {\n                    re.lastIndex++;\n                }\n                if (m) {\n                    key = key.replace(m[0], \"\");\n                    attr = m[1];\n                }\n            }\n            var attrs = attr.split(\",\");\n            var j = attrs.length;\n            while (j--) {\n                attr = attrs[j].trim();\n                if (!node._textContent) {\n                    node._textContent = node.textContent;\n                }\n                if (!node._innerHTML) {\n                    node._innerHTML = node.innerHTML;\n                }\n                // convert to camelCase\n                // tslint:disable-next-line:only-arrow-functions\n                var attrCC = attr.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });\n                var reservedNames = [\"prepend\", \"append\", \"text\", \"html\"];\n                var i18nLogger = LogManager.getLogger(\"i18n\");\n                if (reservedNames.indexOf(attr) > -1 &&\n                    node.au &&\n                    node.au.controller &&\n                    node.au.controller.viewModel &&\n                    attrCC in node.au.controller.viewModel) {\n                    i18nLogger.warn(\"Aurelia I18N reserved attribute name\\n\\n  [\" + reservedNames.join(\", \") + \"]\\n\\n  Your custom element has a bindable named \" + attr + \" which is a reserved word.\\n\\n  If you'd like Aurelia I18N to translate your bindable instead, please consider giving it another name.\");\n                }\n                if (this.i18next.options.skipTranslationOnMissingKey &&\n                    this.tr(key, params) === key) {\n                    i18nLogger.warn(\"Couldn't find translation for key: \" + key);\n                    return;\n                }\n                // handle various attributes\n                // anything other than text,prepend,append or html will be added as an attribute on the element.\n                switch (attr) {\n                    case \"text\":\n                        var newChild = DOM.createTextNode(this.tr(key, params));\n                        if (node._newChild && node._newChild.parentNode === node) {\n                            node.removeChild(node._newChild);\n                        }\n                        node._newChild = newChild;\n                        while (node.firstChild) {\n                            node.removeChild(node.firstChild);\n                        }\n                        node.appendChild(node._newChild);\n                        break;\n                    case \"prepend\":\n                        var prependParser = DOM.createElement(\"div\");\n                        prependParser.innerHTML = this.tr(key, params);\n                        for (var ni = node.childNodes.length - 1; ni >= 0; ni--) {\n                            if (node.childNodes[ni]._prepended) {\n                                node.removeChild(node.childNodes[ni]);\n                            }\n                        }\n                        for (var pi = prependParser.childNodes.length - 1; pi >= 0; pi--) {\n                            prependParser.childNodes[pi]._prepended = true;\n                            if (node.firstChild) {\n                                node.insertBefore(prependParser.childNodes[pi], node.firstChild);\n                            }\n                            else {\n                                node.appendChild(prependParser.childNodes[pi]);\n                            }\n                        }\n                        break;\n                    case \"append\":\n                        var appendParser = DOM.createElement(\"div\");\n                        appendParser.innerHTML = this.tr(key, params);\n                        for (var ni = node.childNodes.length - 1; ni >= 0; ni--) {\n                            if (node.childNodes[ni]._appended) {\n                                node.removeChild(node.childNodes[ni]);\n                            }\n                        }\n                        while (appendParser.firstChild) {\n                            appendParser.firstChild._appended = true;\n                            node.appendChild(appendParser.firstChild);\n                        }\n                        break;\n                    case \"html\":\n                        node.innerHTML = this.tr(key, params);\n                        break;\n                    default: // normal html attribute\n                        if (node.au &&\n                            node.au.controller &&\n                            node.au.controller.viewModel &&\n                            attrCC in node.au.controller.viewModel) {\n                            node.au.controller.viewModel[attrCC] = this.tr(key, params);\n                        }\n                        else {\n                            node.setAttribute(attr, this.tr(key, params));\n                        }\n                        break;\n                }\n            }\n        }\n    };\n    return I18N;\n}());\nexport { I18N };\n//# sourceMappingURL=i18n.js.map"}
